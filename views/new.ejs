<%- layout("/layouts/boilerplate.ejs") %>

    <body>
        <div class="row offset-sm-1 offset-md-2  offset-lg-3 mt-4">
            <div class="toast-container position-fixed bottom-0 end-0 p-3">
                <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header">
                        <strong class="me-auto">UniStay</strong>
                        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body" style="color: red;">
                        You can must have atleast 1 and atmost 6 images!
                    </div>
                </div>
            </div>

            <h1>Create New Listing</h1>
            <form method="POST" action="/listings" class="mt-3 col-md-9 needs-validation checkImageCount" id="newListingForm" novalidate
                enctype="multipart/form-data">

                <div class="mb-3">
                    <label for="title" class="form-label">Title</label>
                    <input type="text" name="listing[title]" class="form-control noWhiteSpace" id="title"
                        placeholder="Enter title" required>
                </div>

                <div class="mb-3">
                    <label for="description" class="form-label">Description</label>
                    <textarea class="form-control noWhiteSpace" name="listing[description]" id="description" rows="5"
                        placeholder="Enter each item on a new line" required></textarea>
                    <small class="form-text text-danger">
                        Please enter each item on a new line. For better readability.
                    </small>
                </div>

                <div class="mb-3">
                    <label for="image" class="form-label">Image Url</label>
                    <input type="file" id="image" class=" imageInput form-control" name="listing[image]"
                        placeholder="Enter image url" multiple required accept=".jpg, .jpeg, .png">
                </div>

                <div class="mb-3 row">
                    <div class="col-sm-4">
                        <label for="price" class="form-label">Rent per Month</label>
                        <input type="number" class="form-control noWhiteSpace" id="price" name="listing[price]"
                            placeholder="e.g. 5000" required>
                    </div>
                    <div class="col-sm-4">
                        <label for="brokerage" class="form-label">Brokerage</label>
                        <input type="number" class="form-control noWhiteSpace" id="brokerage" name="listing[brokerage]"
                            placeholder="e.g. 5000" required>
                    </div>
                    <div class="col-sm-4">
                        <label for="security" class="form-label">Security</label>
                        <input type="number" class="form-control noWhiteSpace" id="security" name="listing[security]"
                            placeholder="e.g. 5000" required>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="address" class="form-label">Area/Locality</label>
                    <input type="text" class="form-control noWhiteSpace" id="address" name="listing[address]"
                        placeholder="e.g., Rohini Sector 17" required>
                    <small class="form-text text-danger">
                        Please enter your area or locality only. Your exact address will not be shown.
                    </small>
                </div>
                <progress id="progressBar" value="0" max="100" style="width: 400px;" hidden></progress>
                <div id="status" style="display:none; color:green; font-weight:bold;">
                    Uploading your files... Please wait.
                </div>
                <br />
                <button class="btn btn-success" type="submit">Submit</button>

            </form>
        </div>
    </body>